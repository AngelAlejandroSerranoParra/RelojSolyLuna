<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Document</title>
</head>
<body>
 

    <div class="leftree">
        <img class="letre" src="imagenes/cloud covering left trees.png" alt="">
        <img id="clouds" class="greycould" src="imagenes/grey clouds.png" alt="">
        <img class="rightree" src="imagenes/cloud covering left trees (1).png" alt=""> 
        <img  id="image" class="moonimg" src="imagenes/Moon.png" alt="">
        <img class="treeone" src="imagenes/tree.png" alt="">
        <img class="treetwo" src="imagenes/tree2.png" alt="">
        <img class="treetre" src="imagenes/treetre.png" alt="">
        <img id="smallclouds" class="cloudgren"src="imagenes/clouds.png" alt="">
        <img class="cloud" src="imagenes/white clouds.png" alt="">
        <img class="treefor" src="imagenes/tree2.png" alt="">

    </div>
    <div class="stars">
        <img class="starimg" src="imagenes/stars.png" alt="">
    </div>
 
    
    <div class="rightre">
        <img src="imagenes/cloud covering left trees (1).png" alt=""> 
    </div>
    <div class="conH">
        <p class="inf" id="weather"></p>
        <p class="infcity" id="local"></p>
    </div>
    <div class="ConT">
        <p id="timewather" class="inft"></p>
    </div>

    <div class="ConD">
        <p class="infD" id="day"></p>
        <p class="infM" id="month"></p>

    </div>
    
  
    <script>
           if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        alert("Tu navegador no soporta la API de geolocalización");
      }
      
      function showPosition(position) {
        const latitud = position.coords.latitude;
        const longitud = position.coords.longitude;
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${latitud}&lon=${longitud}&appid=98d4ecc25336713f1bf8b87dd5078eaa`;
        
        fetch(url)
          .then(response => response.json())
          .then(data => {
            const temperature = Math.round(data.main.temp - 273.15);
            
            const cityName = data.name;
            const timezone = data.timezone;
            const weatherElement = document.getElementById("weather");
            weatherElement.innerHTML = `${temperature}°C.`;
            const WatherTime = document.getElementById("timewather");
            WatherTime.innerHTML = `<span id="time"></span>`;

            const day = document.getElementById("day");
            day.innerHTML = `<span id="day"></span>`;

            const montht=document.getElementById("month");
            montht.innerHTML=`<span id="month"></span>`;


            
            const localc=document.getElementById("local")
            localc.innerHTML = `${cityName}`;


            // Actualiza la hora cada segundo
            setInterval(() => {
              const date = new Date();
              const localTime = new Date((date.getTime() + (date.getTimezoneOffset() * 60000) + (timezone * 1000)));
              const hours = localTime.getHours();
              const minutes = localTime.getMinutes();
              const seconds = localTime.getSeconds();
              const timeElement = document.getElementById("time");
              timeElement.innerHTML = `${hours}:${minutes}`;

              const day = localTime.getDate();
              const month = localTime.getMonth() + 1; // Los meses se numeran de 0 a 11
              const year = localTime.getFullYear();
              const dateElement = document.getElementById("day");
              dateElement.innerHTML = `${day}`;
              const dateElementm = document.getElementById("month");
              dateElementm.innerHTML = `|${month}`;


              const imageElement = document.getElementById("image");
              if (hours >= 6 && hours < 18){
                imageElement.src="imagenes/soon.png"
              } else {
                imageElement.src = "imagenes/Moon.png";
              }

              const clouds = document.getElementById("clouds");
              if (hours >= 6 && hours < 18){
                clouds.src="imagenes/day clouds.png"
              } else {
                clouds.src ="imagenes/grey clouds.png";
              }

              const smallclouds = document.getElementById("smallclouds");
              if (hours >= 6 && hours < 18){
                smallclouds.src="imagenes/dclouds.png"
              } else {
                smallclouds.src = "imagenes/clouds.png";
              }
 
            }, 1000);
          })
          .catch(error => {
            console.error(error);
          });
      }
    </script>
</body>

</html>