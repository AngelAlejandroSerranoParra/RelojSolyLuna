<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Document</title>
</head>
<body>
 

    <div class="leftree">
        <img src="imagenes/cloud covering left trees.png" alt="">
    </div>
    <div class="rightree">
        <img src="imagenes/cloud covering left trees (1).png" alt=""> 
    </div>
    <div class="stars">
        <img src="imagenes/stars.png" alt="">
    </div>
    <div class="moon">
        <img src="imagenes/Moon.png" alt="">
    </div>
    <div class="treeone">
        <img src="imagenes/tree.png" alt="">
    </div>
    <div class="treetwo">
        <img src="imagenes/tree2.png" alt="">
    </div>
    <div class="treetre">
        <img src="imagenes/treetre.png" alt="">
    </div>
    <div class="treefor">
        <img src="imagenes/tree2.png" alt="">
    </div>
    <div class="cloud">
        <img src="imagenes/white clouds.png" alt="">
    </div>
    <div class="cloudgren">
        <img src="imagenes/clouds.png" alt="">
    </div>
    <div class="cloudbig">
        <img src="imagenes/grey clouds.png" alt="" style="height: 660px;">
    </div>
    <div class="rightre">
        <img src="imagenes/cloud covering left trees (1).png" alt=""> 
    </div>
    <div id="weather" style="text-align: center; color: aqua;"></div>
  
    <script>
           if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        alert("Tu navegador no soporta la API de geolocalización");
      }
      
      function showPosition(position) {
        const latitud = position.coords.latitude;
        const longitud = position.coords.longitude;
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${latitud}&lon=${longitud}&appid=98d4ecc25336713f1bf8b87dd5078eaa`;
        
        fetch(url)
          .then(response => response.json())
          .then(data => {
            const temperature = Math.round(data.main.temp - 273.15);
            
            const cityName = data.name;
            const timezone = data.timezone;
            const weatherElement = document.getElementById("weather");
            weatherElement.innerHTML = `La temperatura actual en ${cityName} es de ${temperature}°C. La hora local es <span id="time"></span>.`;

            // Actualiza la hora cada segundo
            setInterval(() => {
              const date = new Date();
              const localTime = new Date((date.getTime() + (date.getTimezoneOffset() * 60000) + (timezone * 1000)));
              const hours = localTime.getHours();
              const minutes = localTime.getMinutes();
              const seconds = localTime.getSeconds();
              const timeElement = document.getElementById("time");
              timeElement.innerHTML = `${hours}:${minutes}:${seconds}`;
            }, 1000);
          })
          .catch(error => {
            console.error(error);
          });
      }
    </script>
</body>

</html>